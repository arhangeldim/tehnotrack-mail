# Проект Мессенджер

*Описание*
Разработка сервера для мессенджера - системы обмена сообщениями.

Версия 14.10.2015

* мессенджер поддерживает обработку команд от пользователя в специальном формате

```
     /help - показать список команд
     /login <логин_пользователя> <пароль> - залогиниться (если логин не указан, то авторизоваться)
     /user <никнейм> - добавить никнейм для пользователя
     /user <old_pass> <new_pass> - сменить пароль (только для залогиненных пользователей)
     /history <user> - показать историю переписки с определенным пользователем
     /history <chat_id> - как вариант, каждый разговор хранить в виде чата (юзеров в чате >= 2). Такой подход более перспективный
     /find [chat_id] <regex> - поиск в чатах определенной строки (регулярки)
```     



- чтобы начать пользоваться мессенджером, пользователь должен предварительно авторизоваться (логин/пароль);
- пользователя можно найти по логину;
- пользователь может отправить сообщение другому пользователю;
- история сообщений сохраняется;
- пользователь может посмотреть историю своих переписок;
- мессенджер поддерживает обработку команд от пользователя в специальном формате (например, /help);
- пользователи, история (чаты) - хранятся в базе данных
- мессенджер работает через сетевое соединение (выбрать протокол)

Код должен состоять из независимых модулей, общающихся друг с другом через интерфейсы. Модуль должен быть вынесен в 
отдельный package. Не забывайте, что при хорошем ООП дизайне, каждый класс должен решать определенную задачу и, желательно, только её.
 Также большое внимание уделите оформлению кода и его чистоте:
 Code Style Guide 
 [Полный гайд от гугла на англ.](https://google.github.io/styleguide/javaguide.html)
 [Некоторые рекоммендации на рус.](http://habrahabr.ru/post/112042/)
 
 В коде нужно правильно обрабатывать исключительные ситуации и уметь объяснить, почему обработка происходит таким образом.
 Чтобы определиться с исключениями, подумайте какую задачу вы решаете и как должна себя вести система в том или ином случае. Исключение - 
 это обработка именно нештатных ситуаций, неожидаемое поведение.
 
 Для обработки и хранения данных правильно используйте коллекции. Нужно уметь объяснить свой выбор той или иной структуры данных, знать
 основные свойства (контракт, скорость доступа, добавление, удаление элементов).
 
 
## Система авторизации
Состоит из хранилища пользователей и модуля авторизации, который проверят входные данные, обрабатывает ответы от хранилища.

* Хранилище отделено интерфейсом
* Пароли должны хэшироваться (работаем только с хэшами паролей)


## Система обработки команд

Нужно обрабатывать входные команды от пользователя, обработчик команд не зависит от типа ввода данных (ввод с консоли, по сети или как-то еще)
В зависимости от входных данных вызывается соответствующая команда.
 
*Задача*
 
**Общее описание:**

При запуске приложения из консоли запускается интерфейс обработчика команд (приглашение ввода данных). Команда /help позволит посмотреть список доступных команд.
Чтобы авторизоваться нужно ввести команду /login \<логин_пользователя\> \<пароль\>. Чтобы создать пользователя - /login - тогда попросить ввести имя (проверить) и создать пароль.
Пока пользователь не залогинен, история ввода не сохраняется. Если пользователь ввел текст, а не команду, то текст нужно сохранить в Истории сообщений пользователя

**Требования:**

*минимум*
- Хранилище сообщений отделено интерфейсом
- Должна работать команда /user никнейм - в поле класса User дополнительно сохранить никнейм
- Должна работать команда /history, которая возвращает все сообщения текущего пользователя
- Должна работать команда /find ключевое_слово - поиск слова по истории

*средне*
- Команда /history N - показать только N последних сообщений
- Сообщение должно хранить в себе не только текст, но и timestamp - время создания

*хорошо*
- История сохраняется в файл (Пожалуйста, не используйте сериализацию)
- История читается из файла

*подумать* (не надо реализовывать в коде!)
- продумайте, как хранить историю сообщений для нескольких разговоров (с разными собеседниками)
- продумайте, если в разговоре может быть несколько участников (мультичат)
- какие структуры данных помогут решить задачу с мультичатом, почему?
